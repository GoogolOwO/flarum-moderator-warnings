{"version":3,"sources":["webpack://@askvortsov/flarum-moderator-warnings/webpack/bootstrap","webpack://@askvortsov/flarum-moderator-warnings/./forum.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningControl.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningsToPosts.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningControls.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningModal.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPost.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/index.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/model/Warning.js","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['app']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/CommentPost']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Modal']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Notification']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/PostPreview']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Separator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/UserPage']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/Post']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/User']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/PostControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/classList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/computed']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/string']\""],"names":["extend","PostControls","items","post","app","session","user","canManageWarnings","add","modal","show","WarningModal","callback","location","reload","translator","trans","UserControls","routes","path","component","WarningPage","UserPage","prototype","canViewWarnings","id","visibleWarningCount","LinkButton","href","route","username","children","icon","addWarningsToPosts","Post","warnings","Model","hasMany","CommentPost","props","PostWarningList","PostWarning","init","warning","view","strikes","mod_username","addedByUser","config","isInitialized","timeout","hidePreview","$","removeClass","one","hide","$preview","append","hover","clearTimeout","setTimeout","hasClass","is","m","render","WarningPreview","off","addClass","find","data","Component","map","controls","context","ItemList","forEach","section","toArray","length","item","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","Button","onclick","hideAction","bind","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","save","then","redraw","loading","WarningList","params","refresh","LoadingIndicator","strikeCount","listItems","actionItems","WarningListItem","className","handleOnClickCreate","filter","reduce","a","b","parseResults","results","push","apply","lazyRedraw","store","e","preventDefault","formatedDate","fullTime","createdAt","WarningControls","attrs","Dropdown","buttonClassName","WarningPost","public_comment","private_comment","classList","publicComment","prop","privateComment","title","content","withAttr","onsubmit","newWarning","userId","createRecord","Modal","WarningNotification","notification","subject","fromUser","Notification","loadUser","param","sort","PostPreview","css","warnedUser","initializers","models","Warning","User","attribute","addWarningControl","addWarningPage","notificationComponents","NotificationGrid","name","label","Warnings","transformDate","computed","hasOne","hiddenByUser"],"mappings":"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I,aAAlC,CARoB;AAU9Bb,YAAU,EAAEvH,mDAAK,CAACsI,MAAN,CAAa,YAAb,CAVkB;AAW9BC,cAAY,EAAEvI,mDAAK,CAACsI,MAAN,CAAa,cAAb,CAXgB;AAY9B3H,aAAW,EAAEX,mDAAK,CAACsI,MAAN,CAAa,aAAb,CAZiB;AAc9BvK,MAAI,EAAEiC,mDAAK,CAACsI,MAAN,CAAa,MAAb;AAdwB,CAAlC,E;;;;;;;;;;;ACJA,6B;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,oD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport PostControls from 'flarum/utils/PostControls';\nimport UserControls from 'flarum/utils/UserControls';\nimport Button from 'flarum/components/Button';\n\nimport WarningModal from './components/WarningModal';\n\nexport default function () {\n    extend(PostControls, 'moderationControls', function (items, post) {\n        if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n        items.add('warning',\n            <Button\n                icon=\"fas fa-exclamation-circle\"\n                onclick={() => app.modal.show(new WarningModal({\n                    callback: () => { location.reload() },\n                    user: post.user(),\n                    post: post,\n                }))}>\n                {app.translator.trans('askvortsov-moderator-warnings.forum.post_controls.warning_button')}\n            </Button>\n        );\n    });\n\n    extend(UserControls, 'moderationControls', function (items, user) {\n        if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n        items.add('warning',\n            <Button\n                icon=\"fas fa-exclamation-circle\"\n                onclick={() => app.modal.show(new WarningModal({\n                    callback: () => { location.reload() },\n                    user: user,\n                }))}>\n                {app.translator.trans('askvortsov-moderator-warnings.forum.post_controls.warning_button')}\n            </Button>\n        );\n    });\n}\n","import { extend } from 'flarum/extend';\nimport UserPage from 'flarum/components/UserPage';\nimport LinkButton from 'flarum/components/LinkButton';\nimport WarningPage from './components/WarningPage';\n\nexport default function () {\n    app.routes['user.warnings'] = { path: '/u/:username/warnings', component: WarningPage.component() };\n\n    extend(UserPage.prototype, 'navItems', function (items) {\n        if (app.session.user && (app.session.user.canViewWarnings() || this.user.id() === app.session.user.id() && this.user.visibleWarningCount() > 0)) {\n            items.add(\n                'warnings',\n                LinkButton.component({\n                    href: app.route('user.warnings', { username: this.user.username() }),\n                    children: app.translator.trans('askvortsov-moderator-warnings.forum.user.warnings'),\n                    icon: 'fas fa-exclamation-circle',\n                }),\n                10\n            );\n        }\n    });\n}","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Post from 'flarum/models/Post';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostWarningList from './components/PostWarningList';\n\nexport default function addWarningsToPosts() {\n    Post.prototype.warnings = Model.hasMany('warnings');\n\n    extend(CommentPost.prototype, 'footerItems', function (items) {\n        const post = this.props.post;\n        const warnings = post.warnings();\n\n        if (!warnings) return;\n        items.add(`warnings`,\n            PostWarningList.component({\n                post: post\n            })\n        );\n    });\n}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\nimport username from 'flarum/helpers/username';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarning extends Component {\n    init() {\n        super.init();\n\n        this.warning = this.props.warning;\n    }\n\n    view() {\n        return (\n            <div className=\"Post-warning\">\n                <span className=\"Post-warning-summary\">\n                    {icon('fas fa-exclamation-circle')}\n                    {this.warning.strikes() ?\n                        app.translator.trans('askvortsov-moderator-warnings.forum.post.warning', {\n                            strikes: this.warning.strikes(),\n                            mod_username: username(this.warning.addedByUser())\n                        }) :\n                        app.translator.trans('askvortsov-moderator-warnings.forum.post.warning_no_strikes', {\n                            mod_username: username(this.warning.addedByUser())\n                        })}\n                </span>\n            </div>\n        );\n    }\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        const warning = this.warning;\n\n        let timeout;\n\n        const hidePreview = () => {\n            this.$('.Post-warning-preview')\n                .removeClass('in')\n                .one('transitionend', function () { $(this).hide(); });\n        };\n\n        const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n        this.$().append($preview);\n\n        this.$().children().hover(function () {\n            clearTimeout(timeout);\n            timeout = setTimeout(function () {\n                if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n                // When the user hovers their mouse over the list of people who have\n                // replied to the post, render a list of reply previews into a\n                // popup.\n                m.render($preview[0],\n                    <li data-id={warning.id()}>\n                        {WarningPreview.component({ warning })}\n                    </li>\n                );\n                $preview.show();\n                setTimeout(() => $preview.off('transitionend').addClass('in'));\n            }, 200);\n        }, function () {\n            clearTimeout(timeout);\n            timeout = setTimeout(hidePreview, 250);\n        });\n\n        // Whenever the user hovers their mouse over a particular name in the\n        // list of repliers, highlight the corresponding post in the preview\n        // popup.\n        $('.Post-warning').find('.Post-warning-summary a').hover(function () {\n            $('.Post-warning').find('[data-number=\"' + $(this).data('number') + '\"]').addClass('active');\n        }, function () {\n            $('.Post-warning').find('[data-number]').removeClass('active');\n        });\n    }\n}","import Component from 'flarum/Component';\nimport PostWarning from './PostWarning';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarningList extends Component {\n    init() {\n        super.init();\n\n        this.post = this.props.post;\n    }\n\n    view() {\n        return (\n            <div className=\"Post-warning-list\">\n                {this.props.post.warnings().map(warning => {\n                    return PostWarning.component({ warning })\n                })}\n            </div>\n        );\n    }\n}","import Button from 'flarum/components/Button';\nimport Separator from 'flarum/components/Separator';\nimport ItemList from 'flarum/utils/ItemList';\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n    /**\n     * Get a list of controls for a warning.\n     *\n     * @param {Warning} warning\n     * @param {*} context The parent component under which the controls menu will\n     *     be displayed.\n     * @return {ItemList}\n     * @public\n     */\n    controls(warning, context) {\n        const items = new ItemList();\n\n        ['user', 'moderation', 'destructive'].forEach(section => {\n            const controls = this[section + 'Controls'](warning, context).toArray();\n            if (controls.length) {\n                controls.forEach(item => items.add(item.itemName, item));\n                items.add(section + 'Separator', Separator.component());\n            }\n        });\n\n        return items;\n    },\n\n    /**\n     * Get controls for a warning pertaining to the current user (e.g. report).\n     *\n     * @param {Warning} warning\n     * @param {*} context The parent component under which the controls menu will\n     *     be displayed.\n     * @return {ItemList}\n     * @protected\n     */\n    userControls(warning, context) {\n        return new ItemList();\n    },\n\n    /**\n     * Get controls for a warning pertaining to moderation (e.g. edit).\n     *\n     * @param {Warning} warning\n     * @param {*} context The parent component under which the controls menu will\n     *     be displayed.\n     * @return {ItemList}\n     * @protected\n     */\n    moderationControls(warning, context) {\n        return new ItemList();\n    },\n\n    /**\n     * Get controls for a warning that are destructive (e.g. delete).\n     *\n     * @param {Warning} warning\n     * @param {*} context The parent component under which the controls menu will\n     *     be displayed.\n     * @return {ItemList}\n     * @protected\n     */\n    destructiveControls(warning, context) {\n        const items = new ItemList();\n        if (! warning.isHidden() && app.session.user.canManageWarnings()) {\n            items.add('hide', Button.component({\n                icon: 'far fa-trash-alt',\n                children: app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.delete_button'),\n                onclick: this.hideAction.bind(warning)\n            }));\n        }\n        if (warning.isHidden() && app.session.user.canManageWarnings()) {\n            items.add('restore', Button.component({\n                icon: 'fas fa-reply',\n                children: app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.restore_button'),\n                onclick: this.restoreAction.bind(warning)\n            }));\n        }\n        if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n            items.add('delete', Button.component({\n                icon: 'fas fa-times',\n                children: app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.delete_forever_button'),\n                onclick: this.deleteAction.bind(warning, context)\n            }));\n        }\n\n        return items;\n    },\n\n    /**\n     * Hide a warning.\n     *\n     * @return {Promise}\n     */\n    hideAction() {\n        this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n        return this.save({ isHidden: true }).then(() => m.redraw());\n    },\n\n    /**\n     * Restore a warning.\n     *\n     * @return {Promise}\n     */\n    restoreAction() {\n        this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n        return this.save({ isHidden: false }).then(() => m.redraw());\n    },\n\n    /**\n     * Delete a warning.\n     *\n     * @return {Promise}\n     */\n    deleteAction(context) {\n        if (context) context.loading = true;\n\n        return this.delete()\n            .then(() => {\n            })\n            .catch(() => { })\n            .then(() => {\n                if (context) context.loading = false;\n                location.reload();\n            });\n    }\n};\n","import Component from 'flarum/Component';\nimport app from 'flarum/app';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport WarningListItem from './WarningListItem';\nimport Button from 'flarum/components/Button';\nimport WarningModal from './WarningModal';\nimport listItems from 'flarum/helpers/listItems';\nimport ItemList from 'flarum/utils/ItemList';\n\nexport default class WarningList extends Component {\n  init() {\n    super.init();\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.props.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">{this.strikeCount() ?\n          app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.warnings', { strikes: this.strikeCount() }) :\n          app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.warnings_no_strikes')}</h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map(warning => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.no-warnings')}</label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        'create_warning',\n        Button.component({\n          children: app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.add_button'),\n          className: 'Button Button--primary',\n          onclick: this.handleOnClickCreate.bind(this),\n        })\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings.filter(warning => !warning.isHidden()).map(warning => warning.strikes()).reduce((a,b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.lazyRedraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store.find('warnings', this.user.id()).then(\n      results => {\n        this.warnings = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(\n      new WarningModal({\n        callback: this.refresh.bind(this),\n        ...this.props.params,\n      })\n    );\n  }\n}","import Component from 'flarum/Component';\nimport username from 'flarum/helpers/username';\nimport fullTime from 'flarum/helpers/fullTime';\nimport classList from 'flarum/utils/classList';\nimport Dropdown from 'flarum/components/Dropdown';\nimport WarningPost from './WarningPost';\nimport WarningControls from './WarningControls';\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.props;\n    const addedByUser = warning.addedByUser();\n    const formatedDate = fullTime(warning.createdAt());\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    const attrs = this.attrs();\n\n    return (\n      <div {...attrs}>\n        {controls.length ? Dropdown.component({\n          icon: 'fas fa-ellipsis-v',\n          children: controls,\n          className: 'WarningListItem-controls',\n          buttonClassName: 'Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right'\n        }) : ''}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            {warning.isHidden() ?\n              app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading_hidden', { mod_username: username(addedByUser), strikes: warning.strikes() })\n              : app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading', { mod_username: username(addedByUser), strikes: warning.strikes() })}</h3>\n          {formatedDate}\n          <br />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ?\n              <li className=\"item-excerpt\">\n                <h4 className=\"WarningListItem-subtitle\">{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.linked_post')}</h4>\n                {WarningPost.component({ post: warning.post() })}\n              </li> : ''}\n            <li className=\"item-excerpt\">\n              <h4 className=\"WarningListItem-subtitle\">{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.public_comment')}</h4>\n              <span>{warning.public_comment()}</span>\n            </li>\n            {app.session.user.canManageWarnings() ?\n              <li className=\"item-excerpt\">\n                <h4 className=\"WarningListItem-subtitle\">{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.private_comment')}</h4>\n                <span>{warning.private_comment()}</span>\n              </li> : ''}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  attrs() {\n    const { warning } = this.props;\n    const attrs = {};\n\n    attrs.className = (attrs.className || '') + ' ' + classList({\n      'WarningListItem': true,\n      'WarningListItem--hidden': warning.isHidden(),\n    });\n\n    return attrs;\n  }\n}","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport username from 'flarum/helpers/username';\n\nexport default class WarningModal extends Modal {\n    init() {\n        super.init();\n\n        this.publicComment = m.prop('');\n        this.privateComment = m.prop('');\n        this.strikes = m.prop(0);\n    }\n\n    className() {\n        return 'WarningsModal Modal--large';\n    }\n\n    title() {\n        return app.translator.trans('askvortsov-moderator-warnings.forum.Warnings.create-heading');\n    }\n\n    content() {\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    <div className=\"Form-group\">\n                        <div>\n                            <label>\n                                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.strikes_heading')}\n                                <input\n                                    type=\"number\"\n                                    className=\"FormControl\"\n                                    value={this.strikes()}\n                                    min=\"0\" max=\"5\"\n                                    oninput={m.withAttr('value', this.strikes)}>\n                                </input>\n                            </label>\n                        </div>\n                    </div>\n                    <div className=\"Form-group\">\n                        <div>\n                            <label>\n                                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.public_comment_heading', {\n                                    username: username(this.props.user),\n                                })}\n                                <textarea\n                                    className=\"FormControl\"\n                                    value={this.publicComment()}\n                                    required={true}\n                                    oninput={m.withAttr('value', this.publicComment)}\n                                    rows=\"6\"\n                                />\n                            </label>\n                        </div>\n                    </div>\n                    <div className=\"Form-group\">\n                        <div>\n                            <label>\n                                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.private_comment_heading', {\n                                    username: username(this.props.user),\n                                })}\n                                <textarea\n                                    className=\"FormControl\"\n                                    value={this.privateComment()}\n                                    oninput={m.withAttr('value', this.privateComment)}\n                                    rows=\"6\"\n                                />\n                            </label>\n                        </div>\n                    </div>\n                    <div className=\"Form-group\">\n                        <Button className=\"Button Button--primary Button--block\" type=\"submit\" loading={this.loading}>\n                            {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.submit_button')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        if (!this.strikes()) {\n            this.strikes(0);\n        }\n\n        const newWarning = {\n            userId: this.props.user.id(),\n            strikes: this.strikes(),\n            public_comment: this.publicComment(),\n            private_comment: this.privateComment(),\n        };\n\n        if (this.props.post) {\n            newWarning.post = this.props.post;\n        }\n\n        app.store\n            .createRecord('warnings')\n            .save(newWarning)\n            .then(this.hide.bind(this))\n            .then(this.props.callback)\n            .catch(() => { });\n    }\n}","import Notification from 'flarum/components/Notification';\nimport username from 'flarum/helpers/username';\nimport { truncate } from 'flarum/utils/string';\n\nexport default class WarningNotification extends Notification {\n    icon() {\n        return 'fas fa-exclamation-circle';\n    }\n\n    href() {\n        return app.route('user.warnings', {\n            username: app.session.user.username()\n        });\n    }\n\n    content() {\n        const warning = this.props.notification.subject();\n\n        if (warning.strikes()) {\n            return app.translator.trans('askvortsov-moderator-warnings.forum.notifications.warning_text', {\n                mod_username: username(this.props.notification.fromUser()),\n                strikes: warning.strikes()\n            });\n        } else {\n            return app.translator.trans('askvortsov-moderator-warnings.forum.notifications.warning_no_strikes_text', {\n                mod_username: username(this.props.notification.fromUser()),\n            });\n        }\n    }\n}\n","import UserPage from 'flarum/components/UserPage';\nimport WarningList from './WarningList';\n\nexport default class WarningPage extends UserPage {\n    init() {\n        super.init();\n        this.loadUser(m.route.param('username'));\n    }\n\n    content() {\n        return (\n            <div className=\"WarningsUserPage\">\n                {WarningList.component({\n                    params: {\n                        user: this.user,\n                        sort: 'newest',\n                    },\n                })}\n            </div>\n        );\n    }\n}","import Component from 'flarum/Component';\nimport PostPreview from 'flarum/components/PostPreview';\n\nexport default class WarningPost extends Component {\n    view() {\n        return (\n            <div className=\"WarningPost\">\n                <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n                    <li>\n                        {PostPreview.component({ post:this.props.post })}\n                    </li>\n                </ul>\n            </div>\n        );\n    }\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        let timeout;\n\n        this.$('.PostPreview-preview').show()\n            .css('position', 'relative');\n    }\n}\n","import Component from 'flarum/Component';\nimport fullTime from 'flarum/helpers/fullTime';\nimport username from 'flarum/helpers/username';\n\nexport default class WarningPreview extends Component {\n    init() {\n        super.init();\n\n        this.warning = this.props.warning;\n    }\n\n    view() {\n        const formatedDate = fullTime(this.warning.createdAt());\n        return (\n            <a className=\"WarningPreview\" href={app.route('user.warnings', { username: this.warning.warnedUser().username() })} config={m.route}>\n                <div className=\"WarningListItem-main\">\n                    <h3 className=\"WarningListItem-title\">\n                        {app.translator.trans('askvortsov-moderator-warnings.forum.post.warning', {\n                            strikes: this.warning.strikes(),\n                            mod_username: username(this.warning.addedByUser())\n                        })}\n                    </h3>\n                    {formatedDate}\n                    <br />\n                    <ul className=\"WarningListItem-info\">\n                        <li>\n                            <h4 className=\"WarningListItem-subtitle\">{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.public_comment')}</h4>\n                            <span>{this.warning.public_comment()}</span>\n                        </li>\n                        {app.session.user.canManageWarnings() ?\n                            <li>\n                                <h4 className=\"WarningListItem-subtitle\">{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.private_comment')}</h4>\n                                <span>{this.warning.private_comment()}</span>\n                            </li> : ''}\n                    </ul>\n                </div>\n            </a>\n        );\n    }\n}\n","import app from 'flarum/app';\r\nimport NotificationGrid from 'flarum/components/NotificationGrid';\r\nimport { Extend } from '@flarum/core/forum';\r\nimport { extend } from 'flarum/extend';\r\nimport User from 'flarum/models/User';\r\nimport Model from 'flarum/Model';\r\nimport addWarningControl from './addWarningControl';\r\nimport addWarningPage from './addWarningPage';\r\nimport addWarningsToPosts from './addWarningsToPosts';\r\nimport WarningNotification from './components/WarningNotification';\r\nimport Warning from './model/Warning';\r\n\r\napp.initializers.add('askvortsov/flarum-moderator-warnings', app => {\r\n    app.store.models.warnings = Warning;\r\n    User.prototype.canViewWarnings = Model.attribute('canViewWarnings');\r\n    User.prototype.canManageWarnings = Model.attribute('canManageWarnings');\r\n    User.prototype.canDeleteWarnings = Model.attribute('canDeleteWarnings');\r\n    User.prototype.visibleWarningCount = Model.attribute('visibleWarningCount');\r\n    addWarningControl();\r\n    addWarningPage();\r\n    addWarningsToPosts();\r\n\r\n\r\n    app.notificationComponents.warning = WarningNotification;\r\n    extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\r\n        items.add('warning', {\r\n            name: 'warning',\r\n            icon: 'fas fa-exclamation-circle',\r\n            label: app.translator.trans('askvortsov-moderator-warnings.forum.settings.warning_notification_label')\r\n        });\r\n    });\r\n});","import Model from 'flarum/Model';\nimport computed from 'flarum/utils/computed';\n\nexport default class Warnings extends Model { }\nObject.assign(Warnings.prototype, {\n    id: Model.attribute('id'),\n    public_comment: Model.attribute('public_comment'),\n    private_comment: Model.attribute('private_comment'),\n    strikes: Model.attribute('strikes'),\n\n    createdAt: Model.attribute('createdAt', Model.transformDate),\n    isHidden: computed('hiddenAt', hiddenAt => !!hiddenAt),\n    hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\n\n    warnedUser: Model.hasOne('warnedUser'),\n    hiddenByUser: Model.hasOne('hiddenByUser'),\n    addedByUser: Model.hasOne('addedByUser'),\n\n    post: Model.hasOne('post'),\n});\n","module.exports = flarum.core;","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['components/PostPreview'];","module.exports = flarum.core.compat['components/Separator'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}