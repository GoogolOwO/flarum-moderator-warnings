{"version":3,"sources":["webpack://@askvortsov/flarum-moderator-warnings/webpack/bootstrap","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['app']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/User']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/UserPage']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/PostControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Alert']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Modal']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/avatar']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/classList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/PostPreview']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Separator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/Post']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/CommentPost']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Notification']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/computed']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/string']\"","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningModal.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPost.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningControls.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/model/Warning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/index.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningControl.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningsToPosts.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","WarningModal","init","this","publicComment","prop","privateComment","strikes","className","title","app","translator","trans","username","props","user","content","console","log","type","min","max","oninput","withAttr","required","rows","loading","onsubmit","e","preventDefault","alerts","dismiss","successAlert","newWarning","userId","id","public_comment","private_comment","post","store","createRecord","save","then","hide","show","Alert","children","callback","Modal","_extends","assign","target","arguments","length","source","apply","WarningPost","view","class","PostPreview","component","config","isInitialized","$","css","Component","controls","warning","context","items","ItemList","forEach","section","toArray","item","add","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","session","canManageWarnings","Button","icon","onclick","hideAction","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","redraw","location","reload","WarningListItem","addedByUser","WarningControls","attrs","Dropdown","buttonClassName","href","route","element","tooltip","placement","avatar","transChoice","time","humanTime","createdAt","trust","classList","WarningList","warnings","params","refresh","LoadingIndicator","strikeCount","listItems","actionItems","map","data-id","handleOnClickCreate","filter","reduce","a","b","parseResults","results","push","lazyRedraw","find","modal","WarningPage","loadUser","param","canViewWarnings","visibleWarningCount","sort","UserPage","routes","path","extend","LinkButton","WarningPreview","warnedUser","PostWarning","mod_username","timeout","hidePreview","removeClass","one","$preview","append","hover","clearTimeout","setTimeout","hasClass","is","render","off","addClass","data","PostWarningList","WarningNotification","notification","subject","fromUser","Notification","Warnings","Model","attribute","transformDate","computed","hasOne","hiddenByUser","initializers","models","Warning","User","PostControls","UserControls","addWarningPage","Post","hasMany","CommentPost","notificationComponents","NotificationGrid","label"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,gBClFrDhC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAY,K,cCAzCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAc,O,cCA3CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAe,Q,cCA5CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAkB,W,cCA/CnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,uB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,uB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,qB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,0B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gC,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,oB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,wB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,2B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,yB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,sB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,gB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,2B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,iB,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,4B,cCApCnC,EAAOD,QAAUkC,OAAOC,KAAKC,OAAO,mB,eCApCnC,EAAOD,QAAUkC,OAAOC,M,cCAxBlC,EAAOD,QAAUkC,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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/PostPreview'];","module.exports = flarum.core.compat['components/Separator'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core;","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['utils/string'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Alert from \"flarum/components/Alert\";\nimport Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport username from \"flarum/helpers/username\";\n\nexport default class WarningModal extends Modal {\n  init() {\n    super.init();\n\n    this.publicComment = m.prop(\"\");\n    this.privateComment = m.prop(\"\");\n    this.strikes = m.prop(0);\n  }\n\n  className() {\n    return \"WarningsModal Modal--large\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"askvortsov-moderator-warnings.forum.warning_modal.heading\",\n      { username: username(this.props.user) }\n    );\n  }\n\n  content() {\n    console.log;\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.strikes_heading\"\n                )}\n                <input\n                  type=\"number\"\n                  className=\"FormControl\"\n                  value={this.strikes()}\n                  min=\"0\"\n                  max=\"5\"\n                  oninput={m.withAttr(\"value\", this.strikes)}\n                ></input>\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.public_comment_heading\",\n                  {\n                    username: username(this.props.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  value={this.publicComment()}\n                  required={true}\n                  oninput={m.withAttr(\"value\", this.publicComment)}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.private_comment_heading\",\n                  {\n                    username: username(this.props.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  value={this.privateComment()}\n                  oninput={m.withAttr(\"value\", this.privateComment)}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              type=\"submit\"\n              loading={this.loading}\n            >\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_modal.submit_button\"\n              )}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.successAlert);\n\n    this.loading = true;\n\n    if (!this.strikes()) {\n      this.strikes(0);\n    }\n\n    const newWarning = {\n      userId: this.props.user.id(),\n      strikes: this.strikes(),\n      public_comment: this.publicComment(),\n      private_comment: this.privateComment(),\n    };\n\n    if (this.props.post) {\n      newWarning.post = this.props.post;\n    }\n\n    app.store\n      .createRecord(\"warnings\")\n      .save(newWarning)\n      .then(this.hide.bind(this))\n      .then(\n        app.alerts.show(\n          (this.successAlert = new Alert({\n            type: \"success\",\n            children: app.translator.trans(\n              \"askvortsov-moderator-warnings.forum.warning_modal.confirmation_message\"\n            ),\n          }))\n        )\n      )\n      .then(this.props.callback)\n      .catch(() => {});\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import Component from \"flarum/Component\";\nimport PostPreview from \"flarum/components/PostPreview\";\n\nexport default class WarningPost extends Component {\n  view() {\n    return (\n      <div className=\"WarningPost\">\n        <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n          <li>{PostPreview.component({ post: this.props.post })}</li>\n        </ul>\n      </div>\n    );\n  }\n\n  config(isInitialized) {\n    if (isInitialized) return;\n\n    let timeout;\n\n    this.$(\".PostPreview-preview\").show().css(\"position\", \"relative\");\n  }\n}\n","import Button from \"flarum/components/Button\";\nimport Separator from \"flarum/components/Separator\";\nimport ItemList from \"flarum/utils/ItemList\";\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a warning.\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @public\n   */\n  controls(warning, context) {\n    const items = new ItemList();\n\n    [\"user\", \"moderation\", \"destructive\"].forEach((section) => {\n      const controls = this[section + \"Controls\"](warning, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + \"Separator\", Separator.component());\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for a warning pertaining to the current user (e.g. report).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  userControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning pertaining to moderation (e.g. edit).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  moderationControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning that are destructive (e.g. delete).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  destructiveControls(warning, context) {\n    const items = new ItemList();\n    if (!warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"hide\",\n        Button.component({\n          icon: \"far fa-trash-alt\",\n          children: app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_button\"\n          ),\n          onclick: this.hideAction.bind(warning),\n        })\n      );\n    }\n    if (warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"restore\",\n        Button.component({\n          icon: \"fas fa-reply\",\n          children: app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.restore_button\"\n          ),\n          onclick: this.restoreAction.bind(warning),\n        })\n      );\n    }\n    if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n      items.add(\n        \"delete\",\n        Button.component({\n          icon: \"fas fa-times\",\n          children: app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_forever_button\"\n          ),\n          onclick: this.deleteAction.bind(warning, context),\n        })\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Hide a warning.\n   *\n   * @return {Promise}\n   */\n  hideAction() {\n    this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n    return this.save({ isHidden: true }).then(() => m.redraw());\n  },\n\n  /**\n   * Restore a warning.\n   *\n   * @return {Promise}\n   */\n  restoreAction() {\n    this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n    return this.save({ isHidden: false }).then(() => m.redraw());\n  },\n\n  /**\n   * Delete a warning.\n   *\n   * @return {Promise}\n   */\n  deleteAction(context) {\n    if (context) context.loading = true;\n\n    return this.delete()\n      .then(() => {})\n      .catch(() => {})\n      .then(() => {\n        if (context) context.loading = false;\n        location.reload();\n      });\n  },\n};\n","import Component from \"flarum/Component\";\nimport avatar from \"flarum/helpers/avatar\";\nimport username from \"flarum/helpers/username\";\nimport fullTime from \"flarum/helpers/fullTime\";\nimport humanTime from \"flarum/helpers/humanTime\";\nimport classList from \"flarum/utils/classList\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport WarningPost from \"./WarningPost\";\nimport WarningControls from \"./WarningControls\";\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.props;\n    const addedByUser = warning.addedByUser();\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    const attrs = this.attrs();\n\n    return (\n      <div {...attrs}>\n        {controls.length\n          ? Dropdown.component({\n              icon: \"fas fa-ellipsis-v\",\n              children: controls,\n              className: \"WarningListItem-controls\",\n              buttonClassName:\n                \"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right\",\n            })\n          : \"\"}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            <a\n              href={addedByUser ? app.route.user(addedByUser) : \"#\"}\n              className=\"WarningListItem-author\"\n              config={function (element) {\n                $(element).tooltip({ placement: \"right\" });\n                m.route.apply(this, arguments);\n              }}\n            >\n              {avatar(addedByUser)} {username(addedByUser)}\n            </a>\n          </h3>\n          <span class=\"WarningListItem-strikes\">\n            {warning.isHidden()\n              ? app.translator.transChoice(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading_hidden\",\n                  warning.strikes(),\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || \"0\",\n                  }\n                )\n              : app.translator.transChoice(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading\",\n                  warning.strikes(),\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || \"0\",\n                  }\n                )}\n          </span>\n          <hr />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.linked_post\"\n                  )}\n                </h3>\n                {WarningPost.component({ post: warning.post() })}\n              </li>\n            ) : (\n              \"\"\n            )}\n            <li className=\"item-excerpt\">\n              <h3 className=\"WarningListItem-subtitle\">\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.public_comment\"\n                )}\n              </h3>\n              <p class=\"WarningListItem-comment\">\n                {m.trust(warning.public_comment())}\n              </p>\n            </li>\n            {app.session.user.canManageWarnings() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.private_comment\"\n                  )}\n                </h3>\n                <p class=\"WarningListItem-comment\">\n                  {m.trust(warning.private_comment())}\n                </p>\n              </li>\n            ) : (\n              \"\"\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  attrs() {\n    const { warning } = this.props;\n    const attrs = {};\n\n    attrs.className =\n      (attrs.className || \"\") +\n      \" \" +\n      classList({\n        WarningListItem: true,\n        \"WarningListItem--hidden\": warning.isHidden(),\n      });\n\n    return attrs;\n  }\n}\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport WarningListItem from \"./WarningListItem\";\nimport Button from \"flarum/components/Button\";\nimport WarningModal from \"./WarningModal\";\nimport listItems from \"flarum/helpers/listItems\";\nimport ItemList from \"flarum/utils/ItemList\";\n\nexport default class WarningList extends Component {\n  init() {\n    super.init();\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.props.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">\n          {this.strikeCount()\n            ? app.translator.transChoice(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings\",\n                this.strikeCount(),\n                { strikes: this.strikeCount() || \"0\" }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings_no_strikes\"\n              )}\n        </h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">\n            {listItems(this.actionItems().toArray())}\n          </ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map((warning) => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.no_warnings\"\n              )}\n            </label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        \"create_warning\",\n        Button.component({\n          children: app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_list.add_button\"\n          ),\n          className: \"Button Button--primary\",\n          onclick: this.handleOnClickCreate.bind(this),\n        })\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings\n      .filter((warning) => !warning.isHidden())\n      .map((warning) => warning.strikes())\n      .reduce((a, b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.lazyRedraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store\n      .find(\"warnings\", this.user.id())\n      .catch(() => {})\n      .then((results) => {\n        this.warnings = [];\n        this.parseResults(results);\n      });\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(\n      new WarningModal({\n        callback: this.refresh.bind(this),\n        ...this.props.params,\n      })\n    );\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport WarningList from \"./WarningList\";\n\nexport default class WarningPage extends UserPage {\n  init() {\n    super.init();\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      return (\n        <div className=\"WarningsUserPage\">\n          {WarningList.component({\n            params: {\n              user: this.user,\n              sort: \"newest\",\n            },\n          })}\n        </div>\n      );\n    }\n  }\n}\n","import { extend } from \"flarum/extend\";\nimport UserPage from \"flarum/components/UserPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport WarningPage from \"./components/WarningPage\";\n\nexport default function () {\n  app.routes[\"user.warnings\"] = {\n    path: \"/u/:username/warnings\",\n    component: WarningPage.component(),\n  };\n\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      items.add(\n        \"warnings\",\n        LinkButton.component({\n          href: app.route(\"user.warnings\", { username: this.user.username() }),\n          children: [\n            app.translator.trans(\n              \"askvortsov-moderator-warnings.forum.user.warnings\"\n            ),\n            this.user.visibleWarningCount() > 0 ? (\n              <span className=\"Button-badge\">\n                {this.user.visibleWarningCount()}\n              </span>\n            ) : (\n              \"\"\n            ),\n          ],\n          icon: \"fas fa-exclamation-circle\",\n        }),\n        10\n      );\n    }\n  });\n}\n","import Component from \"flarum/Component\";\nimport WarningListItem from \"./WarningListItem\";\n\nexport default class WarningPreview extends Component {\n  init() {\n    super.init();\n\n    this.warning = this.props.warning;\n  }\n\n  view() {\n    return (\n      <a\n        className=\"WarningPreview\"\n        href={app.route(\"user.warnings\", {\n          username: this.warning.warnedUser().username(),\n        })}\n        config={m.route}\n      >\n        <WarningListItem warning={this.warning}></WarningListItem>\n      </a>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport icon from \"flarum/helpers/icon\";\nimport username from \"flarum/helpers/username\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarning extends Component {\n  init() {\n    super.init();\n\n    this.warning = this.props.warning;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning\">\n        <span className=\"Post-warning-summary\">\n          {icon(\"fas fa-exclamation-circle\")}\n          {this.warning.strikes()\n            ? app.translator.transChoice(\n                \"askvortsov-moderator-warnings.forum.post.warning\",\n                this.warning.strikes(),\n                {\n                  strikes: this.warning.strikes() || \"0\",\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.post.warning_no_strikes\",\n                {\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )}\n        </span>\n      </div>\n    );\n  }\n\n  config(isInitialized) {\n    if (isInitialized) return;\n\n    const warning = this.warning;\n\n    let timeout;\n\n    const hidePreview = () => {\n      this.$(\".Post-warning-preview\")\n        .removeClass(\"in\")\n        .one(\"transitionend\", function () {\n          $(this).hide();\n        });\n    };\n\n    const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n    this.$().append($preview);\n\n    this.$()\n      .children()\n      .hover(\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (!$preview.hasClass(\"in\") && $preview.is(\":visible\")) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render(\n              $preview[0],\n              <li data-id={warning.id()}>\n                {WarningPreview.component({ warning })}\n              </li>\n            );\n            $preview.show();\n            setTimeout(() => $preview.off(\"transitionend\").addClass(\"in\"));\n          }, 200);\n        },\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n    // Whenever the user hovers their mouse over a particular name in the\n    // list of repliers, highlight the corresponding post in the preview\n    // popup.\n    $(\".Post-warning\")\n      .find(\".Post-warning-summary a\")\n      .hover(\n        function () {\n          $(\".Post-warning\")\n            .find('[data-number=\"' + $(this).data(\"number\") + '\"]')\n            .addClass(\"active\");\n        },\n        function () {\n          $(\".Post-warning\").find(\"[data-number]\").removeClass(\"active\");\n        }\n      );\n  }\n}\n","import Component from \"flarum/Component\";\nimport PostWarning from \"./PostWarning\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarningList extends Component {\n  init() {\n    super.init();\n\n    this.post = this.props.post;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning-list\">\n        {this.props.post.warnings().map((warning) => {\n          return PostWarning.component({ warning });\n        })}\n      </div>\n    );\n  }\n}\n","import Notification from \"flarum/components/Notification\";\nimport username from \"flarum/helpers/username\";\nimport { truncate } from \"flarum/utils/string\";\n\nexport default class WarningNotification extends Notification {\n  icon() {\n    return \"fas fa-exclamation-circle\";\n  }\n\n  href() {\n    return app.route(\"user.warnings\", {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    const warning = this.props.notification.subject();\n\n    if (warning.strikes()) {\n      return app.translator.transChoice(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_text\",\n        warning.strikes(),\n        {\n          mod_username: username(this.props.notification.fromUser()),\n          strikes: warning.strikes() || \"0\",\n        }\n      );\n    } else {\n      return app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_no_strikes_text\",\n        {\n          mod_username: username(this.props.notification.fromUser()),\n        }\n      );\n    }\n  }\n}\n","import Model from \"flarum/Model\";\nimport computed from \"flarum/utils/computed\";\n\nexport default class Warnings extends Model {}\nObject.assign(Warnings.prototype, {\n  id: Model.attribute(\"id\"),\n  public_comment: Model.attribute(\"public_comment\"),\n  private_comment: Model.attribute(\"private_comment\"),\n  strikes: Model.attribute(\"strikes\"),\n\n  createdAt: Model.attribute(\"createdAt\", Model.transformDate),\n  isHidden: computed(\"hiddenAt\", (hiddenAt) => !!hiddenAt),\n  hiddenAt: Model.attribute(\"hiddenAt\", Model.transformDate),\n\n  warnedUser: Model.hasOne(\"warnedUser\"),\n  hiddenByUser: Model.hasOne(\"hiddenByUser\"),\n  addedByUser: Model.hasOne(\"addedByUser\"),\n\n  post: Model.hasOne(\"post\"),\n});\n","import app from \"flarum/app\";\nimport NotificationGrid from \"flarum/components/NotificationGrid\";\nimport { Extend } from \"@flarum/core/forum\";\nimport { extend } from \"flarum/extend\";\nimport User from \"flarum/models/User\";\nimport Model from \"flarum/Model\";\nimport addWarningControl from \"./addWarningControl\";\nimport addWarningPage from \"./addWarningPage\";\nimport addWarningsToPosts from \"./addWarningsToPosts\";\nimport WarningNotification from \"./components/WarningNotification\";\nimport Warning from \"./model/Warning\";\n\napp.initializers.add(\"askvortsov/flarum-moderator-warnings\", (app) => {\n  app.store.models.warnings = Warning;\n  User.prototype.canViewWarnings = Model.attribute(\"canViewWarnings\");\n  User.prototype.canManageWarnings = Model.attribute(\"canManageWarnings\");\n  User.prototype.canDeleteWarnings = Model.attribute(\"canDeleteWarnings\");\n  User.prototype.visibleWarningCount = Model.attribute(\"visibleWarningCount\");\n  addWarningControl();\n  addWarningPage();\n  addWarningsToPosts();\n\n  app.notificationComponents.warning = WarningNotification;\n  extend(NotificationGrid.prototype, \"notificationTypes\", function (items) {\n    items.add(\"warning\", {\n      name: \"warning\",\n      icon: \"fas fa-exclamation-circle\",\n      label: app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.settings.warning_notification_label\"\n      ),\n    });\n  });\n});\n","import { extend } from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport PostControls from \"flarum/utils/PostControls\";\nimport UserControls from \"flarum/utils/UserControls\";\nimport Button from \"flarum/components/Button\";\n\nimport WarningModal from \"./components/WarningModal\";\n\nexport default function () {\n  extend(PostControls, \"moderationControls\", function (items, post) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(\n            new WarningModal({\n              callback: () => {\n                location.reload();\n              },\n              user: post.user(),\n              post: post,\n            })\n          )\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n\n  extend(UserControls, \"moderationControls\", function (items, user) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(\n            new WarningModal({\n              callback: () => {\n                location.reload();\n              },\n              user: user,\n            })\n          )\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n}\n","import { extend } from \"flarum/extend\";\nimport Model from \"flarum/Model\";\nimport Post from \"flarum/models/Post\";\nimport CommentPost from \"flarum/components/CommentPost\";\nimport PostWarningList from \"./components/PostWarningList\";\n\nexport default function addWarningsToPosts() {\n  Post.prototype.warnings = Model.hasMany(\"warnings\");\n\n  extend(CommentPost.prototype, \"footerItems\", function (items) {\n    const post = this.props.post;\n    const warnings = post.warnings();\n\n    if (!warnings) return;\n    items.add(\n      `warnings`,\n      PostWarningList.component({\n        post: post,\n      })\n    );\n  });\n}\n"],"sourceRoot":""}