{"version":3,"sources":["webpack://@askvortsov/flarum-moderator-warnings/webpack/bootstrap","webpack://@askvortsov/flarum-moderator-warnings/./forum.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningControl.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningsToPosts.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningControls.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningModal.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPost.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/index.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/model/Warning.js","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['app']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/CommentPost']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Link']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Modal']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Notification']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/PostPreview']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/Separator']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['components/UserPage']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/avatar']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/Post']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['models/User']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/PostControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/Stream']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/classList']\"","webpack://@askvortsov/flarum-moderator-warnings/external \"flarum.core.compat['utils/computed']\""],"names":["extend","PostControls","items","post","app","session","user","canManageWarnings","add","modal","show","WarningModal","callback","location","reload","translator","trans","UserControls","routes","path","component","WarningPage","UserPage","prototype","canViewWarnings","id","visibleWarningCount","LinkButton","href","route","username","icon","addWarningsToPosts","Post","warnings","Model","hasMany","CommentPost","attrs","PostWarningList","PostWarning","oninit","vnode","warning","view","strikes","mod_username","addedByUser","oncreate","timeout","hidePreview","$","removeClass","one","hide","$preview","append","children","hover","clearTimeout","setTimeout","hasClass","is","m","render","WarningPreview","off","addClass","find","data","Component","map","controls","context","ItemList","forEach","section","toArray","length","item","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","hideAction","bind","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","save","then","redraw","loading","WarningList","params","refresh","LoadingIndicator","size","strikeCount","listItems","actionItems","WarningListItem","handleOnClickCreate","filter","reduce","a","b","parseResults","results","push","apply","store","e","preventDefault","WarningControls","elementAttrs","Dropdown","className","buttonClassName","avatar","time","humanTime","createdAt","WarningPost","trust","public_comment","private_comment","classList","publicComment","Stream","privateComment","title","content","onsubmit","alerts","dismiss","successAlert","newWarning","userId","createRecord","type","Modal","WarningNotification","notification","subject","fromUser","Notification","loadUser","param","sort","PostPreview","css","warnedUser","initializers","models","Warning","User","attribute","addWarningControl","addWarningPage","notificationComponents","NotificationGrid","name","label","Warnings","transformDate","computed","hasOne","hiddenByUser"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport PostControls from \"flarum/utils/PostControls\";\nimport UserControls from \"flarum/utils/UserControls\";\nimport Button from \"flarum/components/Button\";\n\nimport WarningModal from \"./components/WarningModal\";\n\nexport default function () {\n  extend(PostControls, \"moderationControls\", function (items, post) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: post.user(),\n            post: post,\n          })\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n\n  extend(UserControls, \"moderationControls\", function (items, user) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      \"warning\",\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: user,\n          })\n        }\n      >\n        {app.translator.trans(\n          \"askvortsov-moderator-warnings.forum.post_controls.warning_button\"\n        )}\n      </Button>\n    );\n  });\n}\n","import { extend } from \"flarum/extend\";\nimport UserPage from \"flarum/components/UserPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport WarningPage from \"./components/WarningPage\";\n\nexport default function () {\n  app.routes[\"user.warnings\"] = {\n    path: \"/u/:username/warnings\",\n    component: WarningPage,\n  };\n\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      items.add(\n        \"warnings\",\n        LinkButton.component(\n          {\n            href: app.route(\"user.warnings\", {\n              username: this.user.username(),\n            }),\n            icon: \"fas fa-exclamation-circle\",\n          },\n          [\n            app.translator.trans(\n              \"askvortsov-moderator-warnings.forum.user.warnings\"\n            ),\n            this.user.visibleWarningCount() > 0 ? (\n              <span className=\"Button-badge\">\n                {this.user.visibleWarningCount()}\n              </span>\n            ) : (\n              \"\"\n            ),\n          ]\n        ),\n        10\n      );\n    }\n  });\n}\n","import { extend } from \"flarum/extend\";\nimport Model from \"flarum/Model\";\nimport Post from \"flarum/models/Post\";\nimport CommentPost from \"flarum/components/CommentPost\";\nimport PostWarningList from \"./components/PostWarningList\";\n\nexport default function addWarningsToPosts() {\n  Post.prototype.warnings = Model.hasMany(\"warnings\");\n\n  extend(CommentPost.prototype, \"footerItems\", function (items) {\n    const post = this.attrs.post;\n    const warnings = post.warnings();\n\n    if (!warnings) return;\n    items.add(\n      `warnings`,\n      PostWarningList.component({\n        post: post,\n      })\n    );\n  });\n}\n","import Component from \"flarum/Component\";\nimport icon from \"flarum/helpers/icon\";\nimport username from \"flarum/helpers/username\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarning extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning\">\n        <span className=\"Post-warning-summary\">\n          {icon(\"fas fa-exclamation-circle\")}\n          {this.warning.strikes()\n            ? app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.post.warning\",\n                {\n                  strikes: this.warning.strikes() || 0,\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.post.warning_no_strikes\",\n                {\n                  mod_username: username(this.warning.addedByUser()),\n                }\n              )}\n        </span>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const warning = this.warning;\n\n    let timeout;\n\n    const hidePreview = () => {\n      this.$(\".Post-warning-preview\")\n        .removeClass(\"in\")\n        .one(\"transitionend\", function () {\n          $(this).hide();\n        });\n    };\n\n    const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n    this.$().append($preview);\n\n    this.$()\n      .children()\n      .hover(\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (!$preview.hasClass(\"in\") && $preview.is(\":visible\")) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render(\n              $preview[0],\n              <li data-id={warning.id()}>\n                {WarningPreview.component({ warning })}\n              </li>\n            );\n            $preview.show();\n            setTimeout(() => $preview.off(\"transitionend\").addClass(\"in\"));\n          }, 200);\n        },\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n    // Whenever the user hovers their mouse over a particular name in the\n    // list of repliers, highlight the corresponding post in the preview\n    // popup.\n    $(\".Post-warning\")\n      .find(\".Post-warning-summary a\")\n      .hover(\n        function () {\n          $(\".Post-warning\")\n            .find('[data-number=\"' + $(this).data(\"number\") + '\"]')\n            .addClass(\"active\");\n        },\n        function () {\n          $(\".Post-warning\").find(\"[data-number]\").removeClass(\"active\");\n        }\n      );\n  }\n}\n","import Component from \"flarum/Component\";\nimport PostWarning from \"./PostWarning\";\nimport WarningPreview from \"./WarningPreview\";\n\nexport default class PostWarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.post = this.attrs.post;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning-list\">\n        {this.attrs.post.warnings().map((warning) => {\n          return PostWarning.component({ warning });\n        })}\n      </div>\n    );\n  }\n}\n","import Button from \"flarum/components/Button\";\nimport Separator from \"flarum/components/Separator\";\nimport ItemList from \"flarum/utils/ItemList\";\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a warning.\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @public\n   */\n  controls(warning, context) {\n    const items = new ItemList();\n\n    [\"user\", \"moderation\", \"destructive\"].forEach((section) => {\n      const controls = this[section + \"Controls\"](warning, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + \"Separator\", Separator.component());\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for a warning pertaining to the current user (e.g. report).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  userControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning pertaining to moderation (e.g. edit).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  moderationControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning that are destructive (e.g. delete).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  destructiveControls(warning, context) {\n    const items = new ItemList();\n    if (!warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"hide\",\n        <Button icon=\"far fa-trash-alt\" onclick={this.hideAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_button\"\n          )}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        \"restore\",\n        <Button icon=\"fas fa-reply\" onclick={this.restoreAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.restore_button\"\n          )}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n      items.add(\n        \"delete\",\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(warning)}>\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_controls.delete_forever_button\"\n          )}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Hide a warning.\n   *\n   * @return {Promise}\n   */\n  hideAction() {\n    this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n    return this.save({ isHidden: true }).then(() => m.redraw());\n  },\n\n  /**\n   * Restore a warning.\n   *\n   * @return {Promise}\n   */\n  restoreAction() {\n    this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n    return this.save({ isHidden: false }).then(() => m.redraw());\n  },\n\n  /**\n   * Delete a warning.\n   *\n   * @return {Promise}\n   */\n  deleteAction(context) {\n    if (context) context.loading = true;\n\n    return this.delete()\n      .then(() => {})\n      .catch(() => {})\n      .then(() => {\n        if (context) context.loading = false;\n        location.reload();\n      });\n  },\n};\n","import Component from \"flarum/Component\";\nimport app from \"flarum/app\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport WarningListItem from \"./WarningListItem\";\nimport Button from \"flarum/components/Button\";\nimport WarningModal from \"./WarningModal\";\nimport listItems from \"flarum/helpers/listItems\";\nimport ItemList from \"flarum/utils/ItemList\";\n\nexport default class WarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.attrs.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: \"large\" });\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">\n          {this.strikeCount()\n            ? app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings\",\n                { strikes: this.strikeCount() || 0 }\n              )\n            : app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.warnings_no_strikes\"\n              )}\n        </h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">\n            {listItems(this.actionItems().toArray())}\n          </ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map((warning) => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_list.no_warnings\"\n              )}\n            </label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        \"create_warning\",\n        <Button\n          className=\"Button Button--primary\"\n          onclick={this.handleOnClickCreate.bind(this)}\n        >\n          {app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_list.add_button\"\n          )}\n        </Button>\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings\n      .filter((warning) => !warning.isHidden())\n      .map((warning) => warning.strikes())\n      .reduce((a, b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store\n      .find(\"warnings\", this.user.id())\n      .catch(() => {})\n      .then((results) => {\n        this.warnings = [];\n        this.parseResults(results);\n      });\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(WarningModal, {\n      callback: this.refresh.bind(this),\n      ...this.attrs.params,\n    });\n  }\n}\n","import Component from \"flarum/Component\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Link from \"flarum/components/Link\";\nimport avatar from \"flarum/helpers/avatar\";\nimport username from \"flarum/helpers/username\";\nimport humanTime from \"flarum/helpers/humanTime\";\nimport classList from \"flarum/utils/classList\";\nimport WarningPost from \"./WarningPost\";\nimport WarningControls from \"./WarningControls\";\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.attrs;\n    const addedByUser = warning.addedByUser();\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    return (\n      <div {...this.elementAttrs()}>\n        {controls.length\n          ? Dropdown.component(\n              {\n                icon: \"fas fa-ellipsis-v\",\n                className: \"WarningListItem-controls\",\n                buttonClassName:\n                  \"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right\",\n              },\n              controls\n            )\n          : \"\"}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            <Link\n              href={addedByUser ? app.route.user(addedByUser) : \"#\"}\n              className=\"WarningListItem-author\"\n            >\n              {avatar(addedByUser)} {username(addedByUser)}\n            </Link>\n          </h3>\n          <span class=\"WarningListItem-strikes\">\n            {warning.isHidden()\n              ? app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading_hidden\",\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || 0,\n                  }\n                )\n              : app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading\",\n                  {\n                    time: humanTime(warning.createdAt()),\n                    strikes: warning.strikes() || 0,\n                  }\n                )}\n          </span>\n          <hr />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.linked_post\"\n                  )}\n                </h3>\n                {WarningPost.component({ post: warning.post() })}\n              </li>\n            ) : (\n              \"\"\n            )}\n            <li className=\"item-excerpt\">\n              <h3 className=\"WarningListItem-subtitle\">\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_list_item.public_comment\"\n                )}\n              </h3>\n              <p class=\"WarningListItem-comment\">\n                {m.trust(warning.public_comment())}\n              </p>\n            </li>\n            {app.session.user.canManageWarnings() &&\n            warning.private_comment() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans(\n                    \"askvortsov-moderator-warnings.forum.warning_list_item.private_comment\"\n                  )}\n                </h3>\n                <p class=\"WarningListItem-comment\">\n                  {m.trust(warning.private_comment())}\n                </p>\n              </li>\n            ) : (\n              \"\"\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  elementAttrs() {\n    const { warning } = this.attrs;\n    const attrs = {};\n\n    attrs.className =\n      (attrs.className || \"\") +\n      \" \" +\n      classList({\n        WarningListItem: true,\n        \"WarningListItem--hidden\": warning.isHidden(),\n      });\n\n    return attrs;\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport username from \"flarum/helpers/username\";\nimport Stream from \"flarum/utils/Stream\";\n\nexport default class WarningModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.publicComment = Stream(\"\");\n    this.privateComment = Stream(\"\");\n    this.strikes = Stream(0);\n  }\n\n  className() {\n    return \"WarningsModal Modal--large\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"askvortsov-moderator-warnings.forum.warning_modal.heading\",\n      { username: username(this.attrs.user) }\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.strikes_heading\"\n                )}\n                <input\n                  type=\"number\"\n                  className=\"FormControl\"\n                  bidi={this.strikes}\n                  min=\"0\"\n                  max=\"5\"\n                ></input>\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.public_comment_heading\",\n                  {\n                    username: username(this.attrs.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  bidi={this.publicComment}\n                  required={true}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans(\n                  \"askvortsov-moderator-warnings.forum.warning_modal.private_comment_heading\",\n                  {\n                    username: username(this.attrs.user),\n                  }\n                )}\n                <textarea\n                  className=\"FormControl\"\n                  bidi={this.privateComment}\n                  rows=\"6\"\n                />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              type=\"submit\"\n              loading={this.loading}\n            >\n              {app.translator.trans(\n                \"askvortsov-moderator-warnings.forum.warning_modal.submit_button\"\n              )}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.successAlert);\n\n    this.loading = true;\n\n    if (!this.strikes()) {\n      this.strikes(0);\n    }\n\n    const newWarning = {\n      userId: this.attrs.user.id(),\n      strikes: this.strikes(),\n      public_comment: this.publicComment(),\n      private_comment: this.privateComment(),\n    };\n\n    if (this.attrs.post) {\n      newWarning.post = this.attrs.post;\n    }\n\n    app.store\n      .createRecord(\"warnings\")\n      .save(newWarning)\n      .then(this.hide.bind(this))\n      .then(\n        (this.successAlert = app.alerts.show(\n          { type: \"success\" },\n          app.translator.trans(\n            \"askvortsov-moderator-warnings.forum.warning_modal.confirmation_message\"\n          )\n        ))\n      )\n      .then(this.attrs.callback)\n      .catch(() => {});\n  }\n}\n","import Notification from \"flarum/components/Notification\";\nimport username from \"flarum/helpers/username\";\n\nexport default class WarningNotification extends Notification {\n  icon() {\n    return \"fas fa-exclamation-circle\";\n  }\n\n  href() {\n    return app.route(\"user.warnings\", {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    const warning = this.attrs.notification.subject();\n\n    if (warning.strikes()) {\n      return app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_text\",\n        {\n          mod_username: username(this.attrs.notification.fromUser()),\n          strikes: warning.strikes() || 0,\n        }\n      );\n    } else {\n      return app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.notifications.warning_no_strikes_text\",\n        {\n          mod_username: username(this.attrs.notification.fromUser()),\n        }\n      );\n    }\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport WarningList from \"./WarningList\";\n\nexport default class WarningPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() ||\n        (this.user.id() === app.session.user.id() &&\n          this.user.visibleWarningCount() > 0))\n    ) {\n      return (\n        <div className=\"WarningsUserPage\">\n          {WarningList.component({\n            params: {\n              user: this.user,\n              sort: \"newest\",\n            },\n          })}\n        </div>\n      );\n    }\n  }\n}\n","import Component from \"flarum/Component\";\nimport PostPreview from \"flarum/components/PostPreview\";\n\nexport default class WarningPost extends Component {\n  view() {\n    return (\n      <div className=\"WarningPost\">\n        <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n          <li>{PostPreview.component({ post: this.attrs.post })}</li>\n        </ul>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$(\".PostPreview-preview\").show().css(\"position\", \"relative\");\n  }\n}\n","import Component from \"flarum/Component\";\nimport Link from \"flarum/components/Link\";\nimport WarningListItem from \"./WarningListItem\";\n\nexport default class WarningPreview extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <Link\n        className=\"WarningPreview\"\n        href={app.route(\"user.warnings\", {\n          username: this.warning.warnedUser().username(),\n        })}\n      >\n        <WarningListItem warning={this.warning}></WarningListItem>\n      </Link>\n    );\n  }\n}\n","import app from \"flarum/app\";\nimport NotificationGrid from \"flarum/components/NotificationGrid\";\nimport { Extend } from \"@flarum/core/forum\";\nimport { extend } from \"flarum/extend\";\nimport User from \"flarum/models/User\";\nimport Model from \"flarum/Model\";\nimport addWarningControl from \"./addWarningControl\";\nimport addWarningPage from \"./addWarningPage\";\nimport addWarningsToPosts from \"./addWarningsToPosts\";\nimport WarningNotification from \"./components/WarningNotification\";\nimport Warning from \"./model/Warning\";\n\napp.initializers.add(\"askvortsov/flarum-moderator-warnings\", (app) => {\n  app.store.models.warnings = Warning;\n  User.prototype.canViewWarnings = Model.attribute(\"canViewWarnings\");\n  User.prototype.canManageWarnings = Model.attribute(\"canManageWarnings\");\n  User.prototype.canDeleteWarnings = Model.attribute(\"canDeleteWarnings\");\n  User.prototype.visibleWarningCount = Model.attribute(\"visibleWarningCount\");\n  addWarningControl();\n  addWarningPage();\n  addWarningsToPosts();\n\n  app.notificationComponents.warning = WarningNotification;\n  extend(NotificationGrid.prototype, \"notificationTypes\", function (items) {\n    items.add(\"warning\", {\n      name: \"warning\",\n      icon: \"fas fa-exclamation-circle\",\n      label: app.translator.trans(\n        \"askvortsov-moderator-warnings.forum.settings.warning_notification_label\"\n      ),\n    });\n  });\n});\n","import Model from \"flarum/Model\";\nimport computed from \"flarum/utils/computed\";\n\nexport default class Warnings extends Model {}\nObject.assign(Warnings.prototype, {\n  id: Model.attribute(\"id\"),\n  public_comment: Model.attribute(\"public_comment\"),\n  private_comment: Model.attribute(\"private_comment\"),\n  strikes: Model.attribute(\"strikes\"),\n\n  createdAt: Model.attribute(\"createdAt\", Model.transformDate),\n  isHidden: computed(\"hiddenAt\", (hiddenAt) => !!hiddenAt),\n  hiddenAt: Model.attribute(\"hiddenAt\", Model.transformDate),\n\n  warnedUser: Model.hasOne(\"warnedUser\"),\n  hiddenByUser: Model.hasOne(\"hiddenByUser\"),\n  addedByUser: Model.hasOne(\"addedByUser\"),\n\n  post: Model.hasOne(\"post\"),\n});\n","module.exports = flarum.core;","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['components/PostPreview'];","module.exports = flarum.core.compat['components/Separator'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/computed'];"],"sourceRoot":""}